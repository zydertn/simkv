<?xml version="1.0"?>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ace="http://www.icefaces.org/icefaces/components"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:icecore="http://www.icefaces.org/icefaces/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title>ICEfaces 2</title>
	<link rel="stylesheet" type="text/css"
		href="./xmlhttp/css/rime/rime.css" />
</h:head>
<h:body styleClass="ice-skin-rime" style="background-color:#D8D8D8">
	<h:form>
		<!-- ui:include src="CustomerTable.xhtml"></ui:include-->
		<ui:include src="UpperMenu.xhtml"></ui:include>

		<p>
			<h:panelGrid columns="2">
				<h:outputText style="font-weight:bolder; margin-right:15px"
					value="Kundendaten ändern" />
				<h:outputText escape="false" style="color: red"
					value="#{actionController.requestMessage}" />
			</h:panelGrid>
		</p>

		<h:panelGrid columns="2">
			<h:panelGrid bgcolor="#E0E6F8" cellspacing="1" width="1200">
				<h:outputText style="font-weight:bold" value="Kundendaten:" />

				<h:panelGrid columns="8">
					<h:outputText value="Firmenname:" />
					<h:inputText size="15" value="#{customerController.customer.name}"
						style="margin-right: 34px;" />
					<h:outputText value="Lieferanten-Nr.:"/>
					<h:inputText size="15" disabled="#{customerController.componentDisabled}" 
						style="margin-right: 34px;"
						binding="#{customerController.supplierNumberBinding}"
						value="#{customerController.customer.supplierNumber}"/>
					<h:outputText value="Kundennummer:" />
					<h:inputText size="12" maxlength="15" style="margin-right: 34px;"
						value="#{customerController.customer.customernumber}" />
					<h:outputText/>
					<h:outputText/>


					<h:outputText value="z.Hd.:" />
					<h:inputText size="15"
						binding="#{customerController.faoBinding}"
						value="#{customerController.customer.fao}" 
						disabled="#{customerController.componentDisabled}"/>
					<h:outputText value="Straße:" style="margin-right: 50px;"/>
					<h:inputText size="15"
						binding="#{customerController.streetBinding}"
						value="#{customerController.customer.address.street}"
						disabled="#{customerController.componentDisabled}" />
					<h:outputText value="Nr.:" />
					<h:inputText size="3"
						binding="#{customerController.housenumberBinding}"
						value="#{customerController.customer.address.housenumber}"
						disabled="#{customerController.componentDisabled}"/>
					<h:outputText/>
					<h:outputText/>
						
						
					<h:outputText value="Postfach:"/>
					<h:inputText size="12" maxlength="15"
						binding="#{customerController.postboxBinding}"
						value="#{customerController.customer.address.postbox}"
						disabled="#{customerController.componentDisabled}" />
					<h:outputText value="PLZ:" />
					<h:inputText size="8" maxlength="8"
						binding="#{customerController.postcodeBinding}"
						value="#{customerController.customer.address.postcode}"
						disabled="#{customerController.componentDisabled}" />
					<h:outputText value="Ort:" />
					<h:inputText size="15" binding="#{customerController.cityBinding}"
						value="#{customerController.customer.address.city}"
						disabled="#{customerController.componentDisabled}"/>
					<h:outputText value="Land:" />
					<h:selectOneMenu
						binding="#{customerController.selectCountryBinding}"
						disabled="#{customerController.componentDisabled}"
						value="#{customerController.countryName}">
						<f:selectItems
							value="#{actionController.model.countries}" var="country" itemLabel="#{country.name}" itemValue="#{country.name}"/>
					</h:selectOneMenu>

					<h:outputText value="Niederlassung:" />
					<h:inputText size="15"
						binding="#{customerController.branchBinding}"
						value="#{customerController.customer.branch}"
						disabled="#{customerController.componentDisabled}" />
					<h:outputText value="VAT-Nummer:"/>
					<h:inputText size="15"
						binding="#{customerController.vatNumberBinding}"
						value="#{customerController.customer.vatNumber}"
						disabled="#{customerController.componentDisabled}"/>
					<h:outputText/>					
					<h:outputText/>					
					<h:outputText/>					
					<ice:commandButton value="Suchen"
						actionListener="#{customerController.searchCustomer}"></ice:commandButton>
					

					<ice:panelPopup visible="#{customerController.opened}"
						rendered="#{customerController.opened}" modal="true"
						autoCentre="true">
						<f:facet name="header">
							<h:outputText value="Welcher Kunde soll geändert werden?"></h:outputText>
						</f:facet>
						<f:facet name="body">
							<h:selectOneRadio value="#{customerController.selectedCustomer}"
								required="true" layout="pageDirection">
								<f:selectItems itemLabel="#{customer.listString}" var="customer"
									value="#{customerController.customerList}"></f:selectItems>
							</h:selectOneRadio>
							<h:commandButton value="Submit"
								actionListener="#{customerController.selectCustomer}"></h:commandButton>
						</f:facet>
					</ice:panelPopup>

				</h:panelGrid>
			</h:panelGrid>
		</h:panelGrid>

		<h:panelGrid columns="2">
			<h:panelGrid bgcolor="#E0E6F8" cellspacing="1" width="1200">
				<h:outputText style="font-weight:bold" value="Rechnungsadresse:"
					disabled="#{customerController.componentDisabled}" />
				<h:panelGrid columns="8">
					<h:outputText value="Anrede: " />
					<h:selectOneMenu
						binding="#{customerController.contactGenderBinding}"
						value="#{customerController.customer.contactPerson.gender}"
						disabled="#{customerController.componentDisabled}">
						<f:selectItems value="#{actionController.model.genders}" />
					</h:selectOneMenu>
					<h:outputText value="Vorname:" />
					<h:inputText size="20"
						binding="#{customerController.contactFirstnameBinding}"
						value="#{customerController.customer.contactPerson.firstname}"
						disabled="#{customerController.componentDisabled}"
						style="margin-right: 19px;">
					</h:inputText>
					<h:outputText value="Nachname:" />
					<h:inputText size="20"
						binding="#{customerController.contactNameBinding}"
						value="#{customerController.customer.contactPerson.name}"
						disabled="#{customerController.componentDisabled}"
						style="margin-left: 4px" />
					<h:outputText/>
					<h:outputText/>


					<h:outputText value="Straße:" style="margin-right: 53px;" />
					<h:inputText size="15"
						binding="#{customerController.invoiceStreetBinding}"
						value="#{customerController.customer.invoiceAddress.street}"
						disabled="#{customerController.componentDisabled}"
						style="margin-right: 34px;" />
					<h:outputText value="Nr.:" />
					<h:inputText size="3"
						disabled="#{customerController.componentDisabled}"
						binding="#{customerController.invoiceHousenumberBinding}"
						value="#{customerController.customer.invoiceAddress.housenumber}" />
					<h:outputText value="Postfach:" />
					<h:panelGrid>
						<h:inputText size="12" maxlength="15"
							binding="#{customerController.invoicePostboxBinding}"
							value="#{customerController.customer.invoiceAddress.postbox}"
							disabled="#{customerController.componentDisabled}" />
					</h:panelGrid>
					<h:outputText/>
					<h:outputText/>
					

					<h:outputText value="PLZ:" />
					<h:inputText size="8" maxlength="8"
						binding="#{customerController.invoicePostcodeBinding}"
						value="#{customerController.customer.invoiceAddress.postcode}"
						disabled="#{customerController.componentDisabled}" />
					<h:outputText value="Ort: " />
					<h:inputText size="20"
						binding="#{customerController.invoiceCityBinding}"
						value="#{customerController.customer.invoiceAddress.city}"
						disabled="#{customerController.componentDisabled}" />
					<h:outputText value="E-Mail:" />
					<h:inputText size="15" disabled="#{customerController.componentDisabled}"
						binding="#{customerController.emailBinding}"
						value="#{customerController.customer.contactPerson.email}"  />
					<h:outputText value="DE-Mail: " />
					<h:inputText size="20" disabled="#{customerController.componentDisabled}"
						binding="#{customerController.de_mailBinding}"
						value="#{customerController.customer.contactPerson.de_mail}" />
				</h:panelGrid>
			</h:panelGrid>
		</h:panelGrid>

		<h:panelGrid columns="2">
			<h:panelGrid bgcolor="#E0E6F8" cellspacing="1" width="1200">
				<h:outputText style="font-weight:bold" value="Rechnung:" />
				<h:panelGrid columns="6">
					<h:outputText value="Preiskategorie: " />
					<h:selectOneMenu
						binding="#{customerController.invoiceconfigSimpriceBinding}" style="margin-right: 81px;"
						value="#{customerController.customer.invoiceConfiguration.simPrice}"
						disabled="#{customerController.componentDisabled}">
						<f:selectItems
							value="#{actionController.model.simPrices.entrySet()}"
							var="simPriceVar"
							itemLabel="#{simPriceVar.key} - #{simPriceVar.value} €"
							itemValue="#{simPriceVar.key}" />
					</h:selectOneMenu>
					<h:outputText value="Einzelrechnungen: " />
					<h:panelGrid style="margin-right: 90px;">
						<h:selectBooleanCheckbox 
							value="#{customerController.customer.invoiceConfiguration.separateBilling}" 
							disabled="#{customerController.componentDisabled}" 
							binding="#{customerController.invoiceconfigSeparateBillingBinding}" 
							style="margin-left: 14px;"/>
					</h:panelGrid>

					<h:outputText value="Einzelrechnungskriterien:" />
					<ice:panelGroup style="overflow-y:auto; width:200px; height:50px;">
						<ice:selectManyCheckbox layout="pageDirection"
							value="#{customerController.customer.invoiceConfiguration.separateBillingCriteria}">
							<f:selectItems value="#{actionController.model.billingCriteria}"/>
						</ice:selectManyCheckbox>
					</ice:panelGroup>
					
					<h:outputText value="Format: " />
					<h:selectOneMenu
						binding="#{customerController.invoiceconfigFormatBinding}"
						value="#{customerController.customer.invoiceConfiguration.format}"
						disabled="#{customerController.componentDisabled}">
						<f:selectItems value="#{actionController.model.invoiceFormats}" />
					</h:selectOneMenu>
					<h:outputText value="Frequenz: " />
					<h:selectOneMenu
						binding="#{customerController.invoiceconfigCreationFrequencyBinding}"
						value="#{customerController.customer.invoiceConfiguration.creationFrequency}"
						disabled="#{customerController.componentDisabled}">
						<f:selectItems
							value="#{actionController.model.invoiceCreationFrequencies}" />
					</h:selectOneMenu>
					<h:outputText value="Spalten:" />
					<ice:panelGroup style="overflow-y:auto; width:200px; height:65px;">
						<ice:selectManyCheckbox layout="pageDirection"
							value="#{customerController.customer.invoiceConfiguration.columns}">
							<f:selectItems value="#{actionController.model.invoiceColumns}" />
						</ice:selectManyCheckbox>
					</ice:panelGroup>
					
					<h:outputText value="Zahlungsziel:"/>
					<h:inputText value="#{customerController.customer.invoiceConfiguration.paymentTarget}" 
						maxlength="2" size="2"
					 	disabled="#{customerController.componentDisabled}"
						binding="#{customerController.paymentTargetBinding}"/>
					<h:outputText value="Einzugsermächtigung:"/>
					<h:selectBooleanCheckbox value="#{customerController.customer.invoiceConfiguration.debtOrder}"></h:selectBooleanCheckbox>
					<h:outputText value="Sortierung: " />
					<h:selectOneMenu
						binding="#{customerController.invoiceconfigSortingBinding}"
						value="#{customerController.customer.invoiceConfiguration.sortingOption}" style="margin-right: 81px;"
						disabled="#{customerController.componentDisabled}">
						<f:selectItems value="#{actionController.model.sortingOptions.entrySet()}" var="sortOptVar" itemLabel="#{sortOptVar.value}" itemValue="#{sortOptVar.key}" />
					</h:selectOneMenu>
					
				</h:panelGrid>

				<h:panelGrid columns="2">
					<h:outputText value="Kommentar:" />
					<h:inputText style="margin-left:19px" size="138" maxlength="100" 
						binding="#{customerController.commentBinding}"
						disabled="#{customerController.componentDisabled}"
						value="#{customerController.customer.comment}" />
				</h:panelGrid>					
			</h:panelGrid>
		</h:panelGrid>
		
		

		<h:panelGrid columns="2">
			<h:panelGrid bgcolor="#E0E6F8" cellspacing="1" width="1200">
				<h:outputText style="font-weight:bold" value="Gutschriften:" />
				<h:panelGrid columns="8">
					<h:outputText value="Neue Gutschrift für" />
					<h:selectOneMenu
						binding="#{customerController.voucherMonthBinding}"
						value="#{customerController.voucher.month}"
						disabled="#{customerController.componentDisabled}">
						<f:selectItems value="#{actionController.model.months.entrySet()}" var="monthVar" itemLabel="#{monthVar.value}" itemValue="#{monthVar.key}" />
					</h:selectOneMenu>
					<h:selectOneMenu
						binding="#{customerController.voucherYearBinding}"
						value="#{customerController.voucher.year}"
						disabled="#{customerController.componentDisabled}">
						<f:selectItems value="#{actionController.model.years}" />
					</h:selectOneMenu>

					<h:outputText value="für" />
					<h:inputText size="4" maxlength="4" 
						binding="#{customerController.cardAmountBinding}"
						value="#{customerController.voucher.cardAmount}" />
					<h:outputText value="Karten à" />
					<h:inputText size="6" maxlength="6"
						binding="#{customerController.cardVoucherBinding}" 
						value="#{customerController.voucher.cardVoucher}" />
					<h:outputText value="€" />
				</h:panelGrid>
			</h:panelGrid>
		</h:panelGrid>

		<!-- h:panelGrid>
			<ice:dataTable 	value="#{customerController.customer.vouchersSorted}"
							var="voucher"
							scrollable="true"
							scrollHeight="140px"
							columnWidths="200px, 200px, 200px, 200px, 50px">
				<ice:column>
					<f:facet name="header">
						Rechnung
					</f:facet>
					#{voucher.monthYearString}
				</ice:column>
				<ice:column>
					<f:facet name="header">
						Anzahl Karten
					</f:facet>
					#{voucher.cardAmount}
				</ice:column>
				<ice:column>
					<f:facet name="header">
						Gutschrift pro Karte
					</f:facet>
					#{voucher.cardVoucher} €
				</ice:column>
				<ice:column>
					<f:facet name="header">
						Gesamtgutschrift
					</f:facet>
					#{voucher.totalVoucher} €
				</ice:column>
				<ice:column>
					<ice:commandButton image="delete.png" label="löschen" value="löschen"  style="width:20px; height:20px" action="#{customerController.deleteVoucher(voucher)}"></ice:commandButton>
				</ice:column>
			</ice:dataTable>
		</h:panelGrid-->

		<h:panelGrid>
			<h:panelGrid columns="3">
				<h:commandButton value="Abbrechen"
					action="#{actionController.cancel}"></h:commandButton>
				<ice:commandButton value="Änderungen speichern"
					actionListener="#{customerController.updateCustomerAction}"></ice:commandButton>
				<h:commandButton value="Löschen"
					action="#{customerController.deleteCustomer}"></h:commandButton>
			</h:panelGrid>
		</h:panelGrid>

	</h:form>
</h:body>
</html>